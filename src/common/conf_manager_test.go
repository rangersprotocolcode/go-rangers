// Copyright 2020 The RangersProtocol Authors
// This file is part of the RocketProtocol library.
//
// The RangersProtocol library is free software: you can redistribute it and/or modify
// it under the terms of the GNU Lesser General Public License as published by
// the Free Software Foundation, either version 3 of the License, or
// (at your option) any later version.
//
// The RangersProtocol library is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
// GNU Lesser General Public License for more details.
//
// You should have received a copy of the GNU Lesser General Public License
// along with the RocketProtocol library. If not, see <http://www.gnu.org/licenses/>.

package common

import "testing"

var (
	PATH = "tas_test.ini"
	cm   = newConfINIManager(PATH)
)

func TestConfFileManager_SetBool(t *testing.T) {

	cm.SetBool("teSt_1", "bool_1", true)
	cm.SetDouble("test_2", "double_1", 10.33)
	cm.SetString("TTT", "STR", "abc好的")

	t.Log(cm.GetBool("test_1", "netId", true))
	t.Log(cm.GetDouble("test_2", "double_1", 100))
	t.Log(cm.GetString("test_2", "str1", "sss"))
	t.Log(cm.GetString("test_2", "str2", "223"))
	t.Log(cm.GetString("ttt", "ID", "dDDD"))

	sm := cm.GetSectionManager("test_2")
	t.Log(sm.GetString("str1", "sss"))
	sm.SetDouble("d1", 2932)
	sm.SetString("abc", "DBU")
	sm.Del("str2")
}

func TestConfFileManager_SetString(t *testing.T) {

	cm.SetString("TTT2", "STR2", `{"GroupInfo":{"GroupID":"0x546fba8c2e6230c670fce6b59e8ae79eab9f6716992f8058d0df058fd256ff40","GroupPK":"0x16c223dc5dddd73e8910bf7bc6068a476c20fba5fd70f894c12305a9129849623352ccfee3b97b1b6b89477ba1511283ca3440c311c3a395349de65d7e21463987919cb908b6cbbd3797f5ff023d7e6bf408368263bc611009241bd4c2f3d80e89a6fe9c564c3bc08ff0838b6108a47bbe03772b4267b6dd7805a8094ecc9c8b","GroupInitInfo":{"GroupHeader":{"Hash":"0x8cc61b35e8710446b73f2fd8701ecd4da14c25835e0842660b94530c65fd2a17","Parent":null,"PreGroup":null,"Authority":777,"Name":"Rangers Protocol Genesis Group","BeginTime":"2021-12-03T17:22:38.140002+08:00","MemberRoot":"0x4d8a00470c8a1ca6359d9811e30059db72dad8d55f21dc457793466d471e1de4","CreateHeight":0,"ReadyHeight":1,"WorkHeight":0,"DismissHeight":18446744073709551615,"Extends":""},"ParentGroupSign":{},"GroupMembers":["0x450233af5bf35351a7f5f75ddc919481f3cbccc5c8acca94f5f655d6481a1637","0x5bcbcbdba33211edd4307c831f97976191dba9ebb74633923ccf2849f5c18308","0x8689719d636a7e945c81f51d7dd061b6dfdf4f1b72e197471c8b0fbfe402f416","0x4e550c28e8ead9f6abd081b5c33a10deeb24c43e821aaba6ea40bf29d83702a9","0x8eb32fa87153b67dfd5981266899a5613b58b054de55c9b986148f83f5305878","0x90e1f3e6aea5e1cdf7882a842dc1582bc100da1ae013a3ec3468ad87e9e66a8d","0x87f5a6225496d8231feb18591c8de325fbfb21d90b78a860997c7f8915990f41","0x2fd9ac354a85b859986fa1efde3f988f7001491e3ee6b367fc4df97c728ece6b","0x529b74731048645faae815b27885e217bd52e4bd51fdb6b3d7de5ef74a2fe037","0x8e83b60d2df2bc07ca68038a44e3b528125001375ecda253847a73d133152eb0","0x5b263345bb4486f8011dc3bab84e85eff520123acaac07c77b9fa1721150a43a","0x627c3cc4f76e396391e6783c46e652df5ee91147c42bc782714182ae0dd3172b","0x5ab27bb391314f4abeb2adc3de5e9230cf3b842f8ce166785a135318e5227f67","0xc8176f7e025e02107dd6a7e6e6b5e8a620f7fa67ad28d071ff0f5cb802ff3f3d","0x043e4eb53148c1ec9f55404a68a73211033b88e313b61a1a2495f2f6bd98d366","0x94e4691eb762a2d0fcfa3874f6d8b62d84842ba153db1e823c5818ad53747cdb","0xa02a92e3cd31c30b98ea81b88a005fc09b401b13f535f5da1d190a659511cc91","0x573510dbd33b211f231dc215ceb100292453db84bfcc1ccb9d66f9cbc63d875e","0x77bf71b9352ef886783bd7a9c0eddc9827c35505c4f792706fb89b6894aefeab","0x0c5a7fd40963705372dd7187c79b4b7645d8df29c39ee2a85c6d5c638b608350"]},"MemberIndexMap":{"0x043e4eb53148c1ec9f55404a68a73211033b88e313b61a1a2495f2f6bd98d366":14,"0x0c5a7fd40963705372dd7187c79b4b7645d8df29c39ee2a85c6d5c638b608350":19,"0x2fd9ac354a85b859986fa1efde3f988f7001491e3ee6b367fc4df97c728ece6b":7,"0x450233af5bf35351a7f5f75ddc919481f3cbccc5c8acca94f5f655d6481a1637":0,"0x4e550c28e8ead9f6abd081b5c33a10deeb24c43e821aaba6ea40bf29d83702a9":3,"0x529b74731048645faae815b27885e217bd52e4bd51fdb6b3d7de5ef74a2fe037":8,"0x573510dbd33b211f231dc215ceb100292453db84bfcc1ccb9d66f9cbc63d875e":17,"0x5ab27bb391314f4abeb2adc3de5e9230cf3b842f8ce166785a135318e5227f67":12,"0x5b263345bb4486f8011dc3bab84e85eff520123acaac07c77b9fa1721150a43a":10,"0x5bcbcbdba33211edd4307c831f97976191dba9ebb74633923ccf2849f5c18308":1,"0x627c3cc4f76e396391e6783c46e652df5ee91147c42bc782714182ae0dd3172b":11,"0x77bf71b9352ef886783bd7a9c0eddc9827c35505c4f792706fb89b6894aefeab":18,"0x8689719d636a7e945c81f51d7dd061b6dfdf4f1b72e197471c8b0fbfe402f416":2,"0x87f5a6225496d8231feb18591c8de325fbfb21d90b78a860997c7f8915990f41":6,"0x8e83b60d2df2bc07ca68038a44e3b528125001375ecda253847a73d133152eb0":9,"0x8eb32fa87153b67dfd5981266899a5613b58b054de55c9b986148f83f5305878":4,"0x90e1f3e6aea5e1cdf7882a842dc1582bc100da1ae013a3ec3468ad87e9e66a8d":5,"0x94e4691eb762a2d0fcfa3874f6d8b62d84842ba153db1e823c5818ad53747cdb":15,"0xa02a92e3cd31c30b98ea81b88a005fc09b401b13f535f5da1d190a659511cc91":16,"0xc8176f7e025e02107dd6a7e6e6b5e8a620f7fa67ad28d071ff0f5cb802ff3f3d":13},"ParentGroupID":"0x0000000000000000000000000000000000000000000000000000000000000000","PrevGroupID":"0x0000000000000000000000000000000000000000000000000000000000000000"},"VrfPubkey":["VI0+o5hwAhI6L8jZs9Dbh+D74QwhnNNJwdZuCRTCFg0=","UAjJ9rCH9xr8qvS6GoJ53IUr8cifTqG9DfYYF11cZ1w=","WEHzNKpWobmLIEcrTxWuYXlWzdJ97UkS7Q017bf4Skw=","8zP55XpPAww1sYzk4pkKapeKkAvYpTwycafpMHt3eos=","jE3YTfVFJjt09ffwR+8ASYWS0AYZh7SKNxYR4qnHYmk=","4+k+hO5B89AxBTNyBIxI/XLJJ/oOWf+ONOtjiCNfgCI=","6VB7gmpW+lLczR2LOjnDqRp4FPpo0Q64Ixl+DJYJzvQ=","gKmmZPcqefncu8z3n4KqigGCkwTBsJlcxhov61TaGow=","eiL1BxPQySdl69uwXf++pcYoG2dtRL27/FtQQCFPu5A=","h/mE5vjUDNY21PkWyAynBNnk1dq2Qacvxv07XfczlJ0=","s3GFHiJneOPvmc8wdzQrh+SwOoea3uLJRN9E6psA9ag=","KpEKIGYbwZ5/4jXV/HoWdBjAjL4SUbFVo9fU9t9X9gM=","4iXSVE8YiR5rKAjRh5uaJv/uPg8RIeuyj/WmkRw0efw=","vNwdr02SylmenL6VWD9N4t9HpsKM0bYYCohQQfpzUc8=","FzsBpNoXfFEcaMPUEiuBtg5mYLrPwoxu36m+jCqGc2U=","4OhliV3XMcfO+9DN4Lf0516bb/MD7GpeJjHgD3wqLBk=","mwXNcNcsBTJqZG+1Bl0quy5/l+9sh2G8bXCu8bAPfcc=","bNbisFMEY6dOuBu6oPZkSVuMr/RoafyX9zivvI+ijHE=","+YHkkpxVpotTY5D4U+BKKqh3d3UH6CUYm18nHl8kjg0=","q7uwofVvDjAGEbrCZj6D4YUz2D+ooeQ2jmIwIq9+mz8="],"Pubkeys":["0x14221fb8822d338728fdc42f032067b6d8dab927de3d03ab97421c2bd6d4c2cf71107e7200cbcd3896347731f7a555e6783f3aaa1854c28e896d5c8c0890e85044d0dec1190b9e4be4b68c0079c50ccbe322fb82cf2ea0749230e668ddf9fdba56ae764cc2be1e00d2717bed3107f830c37b4af5d6215964a555b56904908928","0x058eafd978521289e48a41205aa833c8625aedfdf8ba45db0d20b34f54e102d55d8da1bf8ac1784b33fdad465291aca945b7e1a58e71529a95c118c3c297b3b62aa276dac03710547bc9f21682cc7fca8ae30ec10ecd1a8594abf63e9e521ac31da44e7d376ec21f378f8f3c97d531d3e30c19622833e96ae0824a9f4dde89c5","0x7e14b5772259f5c3f78986054937cf0bd5a35f3c30028f728562d3bf10f9fff6260fa93a98806e19429d1f4b64dd58de24d7c2b847931c2014587e1131b2606f8e7bf6ae3af35f28bff4292fbcdb1eec4215f9c65361f8b1965a70da8d28bf5f2a7e8f8bc077a10d68991ebd58f76b911406c97ce105573470aa79a2ac656aec","0x844e42bc758c340a0de80c89aec0368b5cd02def16bfd26a42e94d61bb8515a6880b505bfe56c1d813b3e07043457af365248a7c68e99e408aae7aedc1f3154b70b6c4503d149dc398fc7f3ae2ac91890e2a580d1f3b39e8aed3edadef46fba618687a058b15e2a4d9a76c202155d3daa0d3379ad70164412e47910881976e37","0x00de4e03947211a923d61a834b3cc56b405739d11daf045f7f6a2f92b458064249786abc2d6c5591b3e989838f81f4a9e386b0f9f643d3d1d7e8c1ddd9f5919f66dcdce30b6e14b219f11ecaf1a916007675275320e390cd22605fef171df2733420db1a73e6c295dd105b4036b5e07b8a7eb776d87335036db3653d133cc018","0x5108c160f30a7f13d4e6e887f9da726770daa22e2e1a826f2165b7f9a38baebf6e4de47dec1b1552ee6568f433f6c9d2cc19f9deac4d5e545c0502ecaef0af992801b3c2582a00d147bcf63346f275062c4232a2331461218631619b1151686d2d23e412c98e444a783a013f817b52387f76077d5cb24e737ce09e2058cf3582","0x6cc71c9a2b568c4617e24f02ecd034af76addaf63131f06443a4c5ef9bee689d88299815191cc3f84b8171e104b08c18971218121f621ebdbb04de62be87f3cd4b190501717ccdedfcc6de9b336475ff2347af9790d9d8b91f7edbbe2df9fe1911678205a7adc8b2a1960856c76aaeec206651e620dfee972005e36f922bcce5","0x08c83aa1c8660dfbf4d0fcdce247b7aeac78785b458290b2207549141370bfa840c459066d9cc3d433edfd0090d3f6fe19b613dc90ae6bb6a6cf752c2e26046922b922d94ca2d97b80540d5559b998930eb79efd9e2f00002c16e71801eef854782e2584d77d33984a23f2f6038c23db28ebbef529355c5ec9135cd4f9e9bfb0","0x86f9d231be933f27855b649373c2af79e539be6d6a0dd45a350f12fae57b3da7359d2638cac7277adcc5ccb33404d84bc1ecc545cb54ff751035bc963f1286b21167eae74cd0a2d2542d9c2b7735d5574c9bd284ae7f65e0c2d93e0e5e735e9d35d93294e2566a552afdde1430d33638172547c019fb8067188f3553df603aa1","0x6fd49f13e637d2fc807468ba97f853e0b119adc5abaf85b97408ba4cbf810d4818c62fb28d09d251ec692c28e9442875b648741f27310b688cfbebbf4cba394e06f541ed1b6d9a25d79f08cfcfe261bb995eb13a34510c0f978efe52b18c1ef40b0d4a3d34c17a8d47b43d4985411b2b15c9fd6407a90cbfa4d1d1c4cb57019f","0x513bf88489551450f93f634b5f2c642ef8f10739fa9d634d1733dfddf556443b6dc935c91a6446a96aa609e9112ef9654425fa2640f81469f7aee12483a1bc566275a16ec52fe8e4cd86df129da9b25daf7668acf9e1f968b9dd1e47d63f6fd5282ffbb7b2126d063a68dfa1fc657fa6973ee77752a21c2aced8eb68113ea412","0x7b8bdf79869f7137add5bc12f6f9c68f87ee6f3fe2bb0a65387027c535acd9ef89a2229278fca8a9b4b83391453209540c6e3e15c96d5de71ad0ee359ec4f6717a8f40fa1bee2a3bafa0d667e8c7de90d1f8be5b0e29a95fc84584da4e5bfeca1b23d2b43cf7c23571b4e7d2b3f65857150513a15b873365d3b22676219f53d8","0x1501935873beb2de9e563e42fdb09368a8fefbb17bd1e40912ceaa42cc1dbbf1366d712b1def3147dd177d2600c8bfc5386cfb45160e64f8093198acd98e398d51c23ab269e99959b6b0498b2f0183e886ae6800001d4e5b9a519e437bdd2cc874f37978cc9f942d72e55cc4d792b80b099a608154af63dbeb010519f047b7d6","0x7401ad03b58f934efdad24716a79fd6b9b9050e197f581ca327837f2a1e925d03392002f3bf3862831bd0d57238b18e52c7893c91c94aa74f29f4acfec0ed93b32cab8928bd28ea0fc4374ab82c260368e3b835283f9e5400fb02a20bc79ee5b6d24d9560ff049dc46ebaba0fa7df622a605bb1162646ba17d59ecfcd4b8679e","0x5595038b537936691be9a24b149467c91233112622b54a403760de940e630a0834f6ba9122d83d406205bc4b28e833db83d5242000e42d9332202ff48def521f71fc1c96570fa234e3ce9765ff4ac91c241f65706b5c72d84f15e0a22979deee1897f0386472a72882fbf3cd842b4c70a4bec36820e28e2b12c544e82b512b5e","0x488acf411d1e636bece8d7761d680b0541da8edeb10889a493fcad546cebc79e669141894588bd208e631332bebf7250adab54e3be3c723272b858b8edef18c4481ace8a21325512852028ba9bdd3c28b9ccbf9c3966aad8d426f3393e0e11880f7f3503839c6b7a291cd34ec404e72047c4c9c3939aadfbd9b25cfa77908c0c","0x38b72c85a9760d8925006a706e8da98694b298ae20c79888a3f27431fcc167ec3be5cd6a07b87ff5d39ca1bc1d33601b5034863dafbcf632224d2c998cdfdf9c5d9184fe444a966c70decf87a4b1e5c582d73d5cef1bbb8c1424964362a2f8ab58b6b053f9b0e1b0f1ced40667f313684cdd63cecd79cad62eb99545e09de223","0x55a149cfb85e767b939f1cbd710e039da99ad8cc2efcab46abe6da252b9204ae6f2da2c058c0c1f236fc2b024c90202eeca617149024ab4dfe7cc3b8d80fcf0a7b9134ac0834b34d514c60a2652ee34f408e4e9e7173e7af1aadb8ac77fa1bdb1ee44e4c245801623dcd81f733c45bfe84128270c064ccc172dc9841ea6a3d6b","0x5f0b4c240b56b1f17948467b4b19418dfc7da075571e11ecccaf1d7a521d7dcf00947c4afb41d8ac5da8041fdfc04787cf07dcb676071e4b4f777e652aa26c171e0193c337ec6a3a05bb7cc6fff677d1a356029595a35ee54c8be40e12eb9f4c5fd42fdd45547501115ac3223db47b35212970c9a7265abc62a0a2b298a50795","0x8273cf5e3b46dc73c6476f91d0d192f95129ad3fb162ec4ebe9e029f901a6a335f572a899ec2efd86898b02ac2168008f8aef22c8b7967f13897fe40a925f8fa8d531022ea817537455b7c7cc50cb0d21e09739e0093790f9fffb101e4a9ed31750bf06a693a702182ed63264e51e121900b68694a054af7fa0eff1e78d10d17"]}`)
	sm := cm.GetSectionManager("TTT2")
	t.Log(sm.GetString("str2", "sss"))
}
